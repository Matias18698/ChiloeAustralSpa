import{C as h,r as y,k as C,x as A,c as o,b as l,d as w,u as s,m as L,w as T,e as a,f as u,n as S,t as i,i as V,g as m,j as _,F as c,h as p,v as k}from"./app-DROPElbh.js";import{A as D}from"./AppMain-CjcZ16YI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"min-h-screen bg-gradient-to-br from-blue-50 to-white py-10 px-4 sm:px-6 lg:px-8"},F={class:"max-w-2xl mx-auto bg-white p-8 rounded-2xl shadow-xl space-y-8 border border-gray-200"},M={class:"relative"},U={key:0,class:"absolute z-10 w-full bg-white border mt-1 rounded shadow max-h-48 overflow-auto"},B=["onClick"],R={key:1,class:"text-red-500 text-sm mt-1"},E=["value"],N={key:0,class:"text-red-500 text-sm mt-1"},z={key:0,class:"text-red-500 text-sm mt-1"},q=["value"],G={key:0,class:"text-red-500 text-sm mt-1"},H=["disabled"],P={__name:"Manual",props:{trabajadores:Array,embarcaciones:Array},setup(v){const f=v,r=h({trabajador_id:"",embarcacion_id:"",fecha:new Date().toLocaleDateString("en-CA"),tipo_asistencia:""}),j=[{value:"D",label:"Disponible"},{value:"TR",label:"Trabajo"},{value:"L",label:"Licencia"},{value:"F",label:"Falta"}],b=y({tipo:"",mensaje:"",visible:!1}),x=(n,e="success",t=3e3)=>{b.value={mensaje:n,tipo:e,visible:!0},setTimeout(()=>{b.value.visible=!1},t)},d=y(""),g=C(()=>{const n=d.value.toLowerCase();return f.trabajadores.filter(e=>e.nombre.toLowerCase().includes(n)||e.rut.toLowerCase().includes(n))});return A(d,n=>{const e=f.trabajadores.find(t=>`${t.nombre} - ${t.rut}`.toLowerCase()===n.toLowerCase());r.trabajador_id=e?e.id:""}),(n,e)=>(l(),o(c,null,[w(s(L),{title:"Registrar Asistencia"}),w(D,null,{default:T(()=>[a("div",$,[a("div",F,[e[11]||(e[11]=a("h2",{class:"text-3xl font-bold text-blue-800 border-b pb-4"},"Registrar Asistencia",-1)),b.value.visible?(l(),o("div",{key:0,class:S(["p-3 rounded-md text-sm font-medium text-center",b.value.tipo==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},i(b.value.mensaje),3)):u("",!0),a("form",{onSubmit:e[4]||(e[4]=V(t=>s(r).post(n.route("asistencia.store"),{onSuccess:()=>x("Asistencia registrada correctamente."),onError:()=>x("Hubo un error al registrar la asistencia.","error")}),["prevent"])),class:"space-y-6"},[a("div",M,[e[5]||(e[5]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Trabajador",-1)),m(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),placeholder:"Buscar por nombre o RUT",class:"form-input w-full rounded border-gray-300",autocomplete:"off"},null,512),[[_,d.value]]),d.value&&g.value.length?(l(),o("ul",U,[(l(!0),o(c,null,p(g.value,t=>(l(),o("li",{key:t.id,class:"px-3 py-2 hover:bg-blue-100 cursor-pointer",onClick:I=>d.value=`${t.nombre} - ${t.rut}`},i(t.nombre)+" - "+i(t.rut),9,B))),128))])):u("",!0),s(r).errors.trabajador_id?(l(),o("p",R,i(s(r).errors.trabajador_id),1)):u("",!0)]),a("div",null,[e[7]||(e[7]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Embarcación",-1)),m(a("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>s(r).embarcacion_id=t),class:"form-select w-full rounded border-gray-300"},[e[6]||(e[6]=a("option",{disabled:"",value:""},"Selecciona una embarcación",-1)),(l(!0),o(c,null,p(v.embarcaciones,t=>(l(),o("option",{key:t.id,value:t.id},i(t.nombre),9,E))),128))],512),[[k,s(r).embarcacion_id]]),s(r).errors.embarcacion_id?(l(),o("p",N,i(s(r).errors.embarcacion_id),1)):u("",!0)]),a("div",null,[e[8]||(e[8]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Fecha",-1)),m(a("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=t=>s(r).fecha=t),class:"form-input w-full rounded border-gray-300"},null,512),[[_,s(r).fecha]]),s(r).errors.fecha?(l(),o("p",z,i(s(r).errors.fecha),1)):u("",!0)]),a("div",null,[e[10]||(e[10]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tipo de asistencia",-1)),m(a("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>s(r).tipo_asistencia=t),class:"form-select w-full rounded border-gray-300"},[e[9]||(e[9]=a("option",{disabled:"",value:""},"Selecciona un tipo",-1)),(l(),o(c,null,p(j,t=>a("option",{key:t.value,value:t.value},i(t.label),9,q)),64))],512),[[k,s(r).tipo_asistencia]]),s(r).errors.tipo_asistencia?(l(),o("p",G,i(s(r).errors.tipo_asistencia),1)):u("",!0)]),a("div",null,[a("button",{type:"submit",class:"w-full py-3 px-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition font-semibold",disabled:s(r).processing||!s(r).trabajador_id}," Guardar asistencia ",8,H)])],32)])])]),_:1})],64))}};export{P as default};
