import{s as _,C as g,c as l,b as n,d as f,u as o,m as v,w as x,e as r,i as y,g as d,f as u,j as p,t as i,v as k,F as E,W as V}from"./app-LP7xahil.js";import{A as h}from"./AppMain-Cyb1Adui.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"w-full bg-gradient-to-b from-blue-50 to-blue-100 min-h-screen p-6"},z={class:"max-w-4xl mx-auto bg-white p-6 rounded-2xl shadow-lg border border-blue-200"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},S={key:0,class:"error"},C={key:0,class:"error"},L={key:0,class:"error"},N={key:0,class:"error"},O={key:0,class:"error"},B={key:0,class:"error"},H={key:0,class:"error"},M={key:0,class:"error"},j={key:0,class:"error"},A={class:"md:col-span-2"},G={key:0,class:"error"},D={class:"md:col-span-2"},P={key:0,class:"error"},W=["disabled"],q={__name:"Edit",setup(I){const s=_().props.gasto,e=g({cotizacion:s.cotizacion||"",centro_barco:s.centro_barco||"",orden_compra:s.orden_compra||"",fecha_oc:s.fecha_oc||"",hes:s.hes||"",fecha_hes:s.fecha_hes||"",valor_neto:s.valor_neto||"",empresa_facturar:s.empresa_facturar||"",factura:s.factura||"",estado:s.estado||"pendiente",valor_facturado:s.valor_facturado||""}),b=()=>{e.clearErrors();const m={cotizacion:"La cotización es obligatoria.",centro_barco:"El centro-barco es obligatorio.",orden_compra:"La orden de compra es obligatoria.",fecha_oc:"La fecha de OC es obligatoria.",hes:"El HES es obligatorio.",fecha_hes:"La fecha del HES es obligatoria.",valor_neto:"El valor neto es obligatorio.",empresa_facturar:"La empresa a facturar es obligatoria.",factura:"La factura es obligatoria.",estado:"El estado es obligatorio."};for(const[t,a]of Object.entries(m)){const c=e[t];(c==null||String(c).trim()==="")&&(e.errors[t]=a)}if(e.estado==="pagada"){const t=parseFloat(e.valor_facturado);(isNaN(t)||t<=0)&&(e.errors.valor_facturado='El valor facturado debe ser mayor a 0 cuando el estado es "pagada".')}Object.keys(e.errors).length>0||e.post(route("gastos.update",s.id),{onSuccess:()=>V.visit(route("gastos.index"))})};return(m,t)=>(n(),l(E,null,[f(o(v),{title:"Editar Gasto"}),f(h,null,{default:x(()=>[r("div",U,[r("div",z,[t[23]||(t[23]=r("h2",{class:"text-2xl font-bold text-blue-800 mb-8"},"Editar Gasto",-1)),r("form",{onSubmit:y(b,["prevent"]),class:"space-y-6"},[r("div",F,[r("div",null,[t[11]||(t[11]=r("label",{class:"block text-sm font-medium text-gray-700"},"Cotización",-1)),d(r("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>o(e).cotizacion=a),type:"text",class:"input"},null,512),[[p,o(e).cotizacion]]),o(e).errors.cotizacion?(n(),l("p",S,i(o(e).errors.cotizacion),1)):u("",!0)]),r("div",null,[t[12]||(t[12]=r("label",{class:"block text-sm font-medium text-gray-700"},"Centro‑Barco",-1)),d(r("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>o(e).centro_barco=a),type:"text",class:"input"},null,512),[[p,o(e).centro_barco]]),o(e).errors.centro_barco?(n(),l("p",C,i(o(e).errors.centro_barco),1)):u("",!0)]),r("div",null,[t[13]||(t[13]=r("label",{class:"block text-sm font-medium text-gray-700"},"Orden de Compra",-1)),d(r("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o(e).orden_compra=a),type:"text",class:"input"},null,512),[[p,o(e).orden_compra]]),o(e).errors.orden_compra?(n(),l("p",L,i(o(e).errors.orden_compra),1)):u("",!0)]),r("div",null,[t[14]||(t[14]=r("label",{class:"block text-sm font-medium text-gray-700"},"Fecha OC",-1)),d(r("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o(e).fecha_oc=a),type:"date",class:"input"},null,512),[[p,o(e).fecha_oc]]),o(e).errors.fecha_oc?(n(),l("p",N,i(o(e).errors.fecha_oc),1)):u("",!0)]),r("div",null,[t[15]||(t[15]=r("label",{class:"block text-sm font-medium text-gray-700"},"HES",-1)),d(r("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>o(e).hes=a),type:"text",class:"input"},null,512),[[p,o(e).hes]]),o(e).errors.hes?(n(),l("p",O,i(o(e).errors.hes),1)):u("",!0)]),r("div",null,[t[16]||(t[16]=r("label",{class:"block text-sm font-medium text-gray-700"},"Fecha HES",-1)),d(r("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>o(e).fecha_hes=a),type:"date",class:"input"},null,512),[[p,o(e).fecha_hes]]),o(e).errors.fecha_hes?(n(),l("p",B,i(o(e).errors.fecha_hes),1)):u("",!0)]),r("div",null,[t[17]||(t[17]=r("label",{class:"block text-sm font-medium text-gray-700"},"Valor Neto",-1)),d(r("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>o(e).valor_neto=a),type:"number",step:"0.01",class:"input"},null,512),[[p,o(e).valor_neto]]),o(e).errors.valor_neto?(n(),l("p",H,i(o(e).errors.valor_neto),1)):u("",!0)]),r("div",null,[t[18]||(t[18]=r("label",{class:"block text-sm font-medium text-gray-700"},"Valor Facturado",-1)),d(r("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>o(e).valor_facturado=a),type:"number",step:"0.01",class:"input"},null,512),[[p,o(e).valor_facturado]]),o(e).errors.valor_facturado?(n(),l("p",M,i(o(e).errors.valor_facturado),1)):u("",!0)]),r("div",null,[t[19]||(t[19]=r("label",{class:"block text-sm font-medium text-gray-700"},"Empresa a Facturar",-1)),d(r("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>o(e).empresa_facturar=a),type:"text",class:"input"},null,512),[[p,o(e).empresa_facturar]]),o(e).errors.empresa_facturar?(n(),l("p",j,i(o(e).errors.empresa_facturar),1)):u("",!0)]),r("div",A,[t[20]||(t[20]=r("label",{class:"block text-sm font-medium text-gray-700"},"Factura",-1)),d(r("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>o(e).factura=a),type:"text",class:"input"},null,512),[[p,o(e).factura]]),o(e).errors.factura?(n(),l("p",G,i(o(e).errors.factura),1)):u("",!0)]),r("div",D,[t[22]||(t[22]=r("label",{class:"block text-sm font-medium text-gray-700"},"Estado",-1)),d(r("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>o(e).estado=a),class:"input"},t[21]||(t[21]=[r("option",{value:"pendiente"},"Pendiente",-1),r("option",{value:"pagada"},"Pagada",-1)]),512),[[k,o(e).estado]]),o(e).errors.estado?(n(),l("p",P,i(o(e).errors.estado),1)):u("",!0)])]),r("div",null,[r("button",{type:"submit",disabled:o(e).processing,class:"w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-md shadow hover:bg-blue-700 transition disabled:opacity-50"},i(o(e).processing?"Guardando cambios...":"Actualizar Estado"),9,W)])],32)])])]),_:1})],64))}},Q=w(q,[["__scopeId","data-v-b33685ab"]]);export{Q as default};
