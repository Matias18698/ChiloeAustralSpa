import{C as z,r as v,c as i,b as s,d as x,u as r,m as h,w,e as o,i as V,g as u,f as d,j as b,t as n,F as _,h as p,v as f,W as U}from"./app-CQn9PYpG.js";import{A as D}from"./AppMain-DQAPNrS4.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"w-full bg-gradient-to-b from-blue-50 to-blue-100 min-h-screen p-6"},F={class:"max-w-4xl mx-auto bg-white p-6 rounded-2xl shadow-lg border border-blue-200"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},M={key:0,class:"error"},S={key:0,class:"error"},L={key:0,class:"error"},O={key:0,class:"error"},C={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$=["value"],N={key:0,class:"error"},I=["value"],H={key:0,class:"error"},J={class:"col-span-full"},P={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 w-full"},T={class:"block text-sm font-medium text-gray-700 mb-1"},W=["onUpdate:modelValue"],q=["value"],Z={key:0,class:"text-sm text-red-600 mt-1"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K={key:0,class:"error"},Q={key:0,class:"error"},R={key:0,class:"error"},X={key:0,class:"error"},Y={key:0,class:"error"},aa={key:0,class:"error"},ea={key:0,class:"error"},oa={class:"h-20 flex items-end justify-left mb-1 relative"},ra=["src"],ta={class:"pt-4"},ia=["disabled"],sa={__name:"Edit",props:{bitacora:Object,trabajadores:Array,embarcaciones:Array},setup(m){const l=m,a=z({fecha:l.bitacora.fecha??"",numero_boleta:l.bitacora.numero_boleta??"",zona:l.bitacora.zona??"",centro:l.bitacora.centro??"",embarcacion_id:l.bitacora.embarcacion_id??"",trabajador_id:l.bitacora.trabajador_id??"",hora_inicial:l.bitacora.hora_inicial??"",hora_final:l.bitacora.hora_final??"",actividades_am:l.bitacora.actividades_am??"",actividades_pm:l.bitacora.actividades_pm??"",firma_encargado:l.bitacora.firma_encargado??"",observaciones:l.bitacora.observaciones??"",total_jaulas:l.bitacora.total_jaulas??"",dimension_jaulas:l.bitacora.dimension_jaulas??"",buzo_1_id:l.bitacora.buzo_1_id??"",buzo_2_id:l.bitacora.buzo_2_id??"",buzo_3_id:l.bitacora.buzo_3_id??"",buzo_4_id:l.bitacora.buzo_4_id??"",buzo_5_id:l.bitacora.buzo_5_id??""}),y=v(l.bitacora.hora_inicial),k=v(l.bitacora.hora_final),j=()=>{a.clearErrors();const g={fecha:"La fecha es obligatoria.",numero_boleta:"El número de boleta es obligatorio.",zona:"La zona es obligatoria.",centro:"El centro es obligatorio.",embarcacion_id:"Debe seleccionar una embarcación.",trabajador_id:"Debe seleccionar un encargado de faena.",hora_inicial:"La hora inicial es obligatoria.",hora_final:"La hora final es obligatoria.",actividades_am:"Debe ingresar las actividades AM.",actividades_pm:"Debe ingresar las actividades PM.",total_jaulas:"Debe ingresar el total de jaulas.",dimension_jaulas:"Debe indicar las dimensiones de las jaulas."};for(const[e,t]of Object.entries(g))a[e]||(a.errors[e]=t);a.hora_inicial!==y.value&&!a.hora_inicial&&(a.errors.hora_inicial="Debe ingresar nuevamente la hora inicial."),a.hora_final!==k.value&&!a.hora_final&&(a.errors.hora_final="Debe ingresar nuevamente la hora final."),!(Object.keys(a.errors).length>0)&&a.post(route("bitacora.update",l.bitacora.id),{onSuccess:()=>{U.visit(route("bitacora.index"))}})};return(g,e)=>(s(),i(_,null,[x(r(h),{title:"Editar Bitácora"}),x(D,null,{default:w(()=>[o("div",A,[o("div",F,[e[30]||(e[30]=o("h2",{class:"text-2xl font-bold text-blue-800 mb-8"},"Editar Bitácora",-1)),o("form",{onSubmit:V(j,["prevent"]),class:"space-y-6"},[o("div",B,[o("div",null,[e[13]||(e[13]=o("label",{class:"block text-sm font-medium text-gray-700"},"Fecha",-1)),u(o("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=t=>r(a).fecha=t),class:"input"},null,512),[[b,r(a).fecha]]),r(a).errors.fecha?(s(),i("p",M,n(r(a).errors.fecha),1)):d("",!0)]),o("div",null,[e[14]||(e[14]=o("label",{class:"block text-sm font-medium text-gray-700"},"Nº Boleta",-1)),u(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>r(a).numero_boleta=t),class:"input"},null,512),[[b,r(a).numero_boleta]]),r(a).errors.numero_boleta?(s(),i("p",S,n(r(a).errors.numero_boleta),1)):d("",!0)]),o("div",null,[e[15]||(e[15]=o("label",{class:"block text-sm font-medium text-gray-700"},"Zona",-1)),u(o("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>r(a).zona=t),class:"input"},null,512),[[b,r(a).zona]]),r(a).errors.zona?(s(),i("p",L,n(r(a).errors.zona),1)):d("",!0)]),o("div",null,[e[16]||(e[16]=o("label",{class:"block text-sm font-medium text-gray-700"},"Centro",-1)),u(o("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>r(a).centro=t),class:"input"},null,512),[[b,r(a).centro]]),r(a).errors.centro?(s(),i("p",O,n(r(a).errors.centro),1)):d("",!0)])]),o("div",C,[o("div",null,[e[18]||(e[18]=o("label",{class:"block text-sm font-medium text-gray-700"},"Embarcación",-1)),u(o("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>r(a).embarcacion_id=t),class:"input"},[e[17]||(e[17]=o("option",{disabled:"",value:""},"Selecciona una embarcación",-1)),(s(!0),i(_,null,p(m.embarcaciones,t=>(s(),i("option",{key:t.id,value:t.id},n(t.nombre),9,$))),128))],512),[[f,r(a).embarcacion_id]]),r(a).errors.embarcacion_id?(s(),i("p",N,n(r(a).errors.embarcacion_id),1)):d("",!0)]),o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700"},"Encargado de Faena",-1)),u(o("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>r(a).trabajador_id=t),class:"input"},[e[19]||(e[19]=o("option",{disabled:"",value:""},"Selecciona un trabajador",-1)),(s(!0),i(_,null,p(m.trabajadores,t=>(s(),i("option",{key:t.id,value:t.id},n(t.nombre),9,I))),128))],512),[[f,r(a).trabajador_id]]),r(a).errors.trabajador_id?(s(),i("p",H,n(r(a).errors.trabajador_id),1)):d("",!0)])]),o("div",J,[o("div",P,[(s(),i(_,null,p(5,t=>o("div",{key:t},[o("label",T," Buzo "+n(t),1),u(o("select",{"onUpdate:modelValue":c=>r(a)[`buzo_${t}_id`]=c,class:"w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"},[e[21]||(e[21]=o("option",{disabled:"",value:""},"Selecciona un buzo",-1)),(s(!0),i(_,null,p(m.trabajadores.filter(c=>c.cargo&&c.cargo.toLowerCase()==="buzo"),c=>(s(),i("option",{key:c.id,value:c.id},n(c.nombre),9,q))),128))],8,W),[[f,r(a)[`buzo_${t}_id`]]]),r(a).errors[`buzo_${t}_id`]?(s(),i("p",Z,n(r(a).errors[`buzo_${t}_id`]),1)):d("",!0)])),64))])]),o("div",G,[o("div",null,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700"},"Hora Inicial",-1)),u(o("input",{type:"time","onUpdate:modelValue":e[6]||(e[6]=t=>r(a).hora_inicial=t),class:"input"},null,512),[[b,r(a).hora_inicial]]),r(a).errors.hora_inicial?(s(),i("p",K,"Debe ingresar nuevamente la hora inicial.")):d("",!0)]),o("div",null,[e[23]||(e[23]=o("label",{class:"block text-sm font-medium text-gray-700"},"Hora Final",-1)),u(o("input",{type:"time","onUpdate:modelValue":e[7]||(e[7]=t=>r(a).hora_final=t),class:"input"},null,512),[[b,r(a).hora_final]]),r(a).errors.hora_final?(s(),i("p",Q,"Debe ingresar nuevamente la hora final.")):d("",!0)])]),o("div",null,[e[24]||(e[24]=o("label",{class:"block text-sm font-medium text-gray-700"},"Total Jaulas",-1)),u(o("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=t=>r(a).total_jaulas=t),class:"input",min:"0"},null,512),[[b,r(a).total_jaulas,void 0,{number:!0}]]),r(a).errors.total_jaulas?(s(),i("p",R,n(r(a).errors.total_jaulas),1)):d("",!0)]),o("div",null,[e[25]||(e[25]=o("label",{class:"block text-sm font-medium text-gray-700"},"Dimensiones de Jaulas",-1)),u(o("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=t=>r(a).dimension_jaulas=t),class:"input",placeholder:"Ej: 10x10"},null,512),[[b,r(a).dimension_jaulas]]),r(a).errors.dimension_jaulas?(s(),i("p",X,n(r(a).errors.dimension_jaulas),1)):d("",!0)]),o("div",null,[e[26]||(e[26]=o("label",{class:"block text-sm font-medium text-gray-700"},"Actividades AM",-1)),u(o("textarea",{"onUpdate:modelValue":e[10]||(e[10]=t=>r(a).actividades_am=t),rows:"3",class:"input"},null,512),[[b,r(a).actividades_am]]),r(a).errors.actividades_am?(s(),i("p",Y,n(r(a).errors.actividades_am),1)):d("",!0)]),o("div",null,[e[27]||(e[27]=o("label",{class:"block text-sm font-medium text-gray-700"},"Actividades PM",-1)),u(o("textarea",{"onUpdate:modelValue":e[11]||(e[11]=t=>r(a).actividades_pm=t),rows:"3",class:"input"},null,512),[[b,r(a).actividades_pm]]),r(a).errors.actividades_pm?(s(),i("p",aa,n(r(a).errors.actividades_pm),1)):d("",!0)]),o("div",null,[e[28]||(e[28]=o("label",{class:"block text-sm font-medium text-gray-700"},"Observaciones",-1)),u(o("textarea",{"onUpdate:modelValue":e[12]||(e[12]=t=>r(a).observaciones=t),rows:"3",class:"input"},null,512),[[b,r(a).observaciones]]),r(a).errors.observaciones?(s(),i("p",ea,n(r(a).errors.observaciones),1)):d("",!0)]),o("div",null,[e[29]||(e[29]=o("label",{class:"block text-sm font-medium text-gray-700"},"Firma del Encargado",-1)),o("div",oa,[m.bitacora.firma_encargado?(s(),i("img",{key:0,src:`/storage/${m.bitacora.firma_encargado}`,alt:"Firma",class:"border rounded-md max-w-xs object-contain"},null,8,ra)):d("",!0)])]),o("div",ta,[o("button",{type:"submit",disabled:r(a).processing,class:"w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-md shadow hover:bg-blue-700 transition disabled:opacity-50"},n(r(a).processing?"Actualizando...":"Actualizar Bitácora"),9,ia)])],32)])])]),_:1})],64))}},ua=E(sa,[["__scopeId","data-v-3f14000e"]]);export{ua as default};
