import{s as J,r as u,k as v,c as s,b as r,d as C,u as x,m as K,w as P,e as l,g as O,j as X,f as c,F as _,h as j,t as o,W as k,n as Y,T as Z}from"./app-Kob4L842.js";import{A as ll}from"./AppMain-BFqa2tYw.js";import{_ as el}from"./_plugin-vue_export-helper-DlAUqK2U.js";const tl={class:"container"},al={class:"search-container"},ol={class:"table-wrapper",role:"region","aria-live":"polite","aria-label":"Lista de trabajadores"},nl={class:"trabajadores-table"},sl={"data-label":"Nombre"},rl={"data-label":"RUT"},dl={"data-label":"Cargo"},il={"data-label":"Tel√©fono"},ul={"data-label":"Email"},vl={"data-label":"Tipo Contrato"},cl={"data-label":"Foto"},bl=["src"],ml={class:"px-5 py-3 whitespace-nowrap text-center space-x-1"},pl=["onClick"],gl=["onClick"],fl=["onClick"],Cl={key:0},_l={class:"pagination",role:"navigation","aria-label":"Paginaci√≥n de trabajadores"},kl=["disabled"],yl=["onClick","aria-current"],Tl=["disabled"],hl={key:0,class:"modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title"},wl={class:"modal-content"},xl={key:0,class:"modal-body"},Pl={class:"modal-avatar-wrapper"},jl=["src","alt"],Ll={class:"modal-details"},y=10,Nl={__name:"Index",setup(Dl){const L=J().props.trabajadores||[],d=u(1),b=u(""),m=u(!1),n=u(null),p=v(()=>L.map(({id:t,nombre:e,apellido:a,cargo:i,telefono:A,avatar:R,rut:S,fecha_nacimiento:B,estado_civil:M,nacionalidad:U,direccion:I,comuna:V,email:q,afp:z,tama√±o_ropa:W,tipo_contrato:Q,sueldo_real:G,sueldo_liquidacion:H})=>({id:t,nombre:e,apellido:a,cargo:i,telefono:A,avatar:R,rut:S,fecha_nacimiento:B,estado_civil:M,nacionalidad:U,direccion:I,comuna:V,embarcacion_id:null,email:q,afp:z,tama√±o_ropa:W,tipo_contrato:Q,sueldo_real:G,sueldo_liquidacion:H}))),T=v(()=>{const t=b.value.toLowerCase().trim();return t?p.value.filter(e=>e.nombre.toLowerCase().includes(t)||e.apellido.toLowerCase().includes(t)||e.rut.toLowerCase().includes(t)):p.value}),g=v(()=>Math.ceil(T.value.length/y)),h=v(()=>{const t=(d.value-1)*y;return T.value.slice(t,t+y)}),N=t=>{n.value=p.value.find(e=>e.id===t),m.value=!0},D=()=>{m.value=!1,n.value=null},$=t=>{confirm("¬øEst√°s seguro de eliminar a este trabajador?")&&k.delete(route("trabajador.destroy",t),{onError:e=>console.error("Error al eliminar:",e)})},E=()=>{k.visit(route("trabajador.create"))},w=t=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(t),F=t=>t?new Date(t).toLocaleDateString("es-CL"):"",f=t=>{t>=1&&t<=g.value&&(d.value=t)};return(t,e)=>(r(),s(_,null,[C(x(K),{title:"Trabajadores"}),C(ll,null,{default:P(()=>[l("div",tl,[l("header",{class:"header"},[e[3]||(e[3]=l("h2",{class:"title"}," Registro de Trabajadores",-1)),l("button",{onClick:E,class:"btn-primary"}," ‚ûï Nuevo Trabajador ")]),l("div",al,[O(l("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>b.value=a),type:"search",placeholder:"Buscar por nombre o RUT...","aria-label":"Buscar trabajadores",class:"search-input"},null,512),[[X,b.value]])]),l("div",ol,[l("table",nl,[e[5]||(e[5]=l("thead",null,[l("tr",null,[l("th",null,"Nombre"),l("th",null,"RUT"),l("th",null,"Cargo"),l("th",null,"Tel√©fono"),l("th",null,"Email"),l("th",null,"Tipo Contrato"),l("th",null,"Foto"),l("th",null,"Acciones")])],-1)),l("tbody",null,[(r(!0),s(_,null,j(h.value,a=>(r(),s("tr",{key:a.id,class:"table-row"},[l("td",sl,o(a.nombre)+" "+o(a.apellido),1),l("td",rl,o(a.rut),1),l("td",dl,o(a.cargo),1),l("td",il,o(a.telefono),1),l("td",ul,o(a.email),1),l("td",vl,o(a.tipo_contrato),1),l("td",cl,[l("img",{src:`/storage/${a.avatar}`,alt:"Avatar de {{ trabajador.nombre }}",class:"avatar",loading:"lazy"},null,8,bl)]),l("td",ml,[l("button",{onClick:i=>x(k).visit(t.route("trabajador.edit",a.id)),class:"text-indigo-600 hover:text-indigo-900 font-semibold"},"‚úèÔ∏è",8,pl),l("button",{onClick:i=>$(a.id),class:"text-red-600 hover:text-red-900 font-semibold"},"üóëÔ∏è",8,gl),l("button",{onClick:i=>N(a.id),class:"text-green-600 hover:text-green-900 font-semibold"},"üëÅÔ∏è",8,fl)])]))),128)),h.value.length===0?(r(),s("tr",Cl,e[4]||(e[4]=[l("td",{colspan:"8",class:"no-results"},"No se encontraron trabajadores.",-1)]))):c("",!0)])])]),l("nav",_l,[l("button",{onClick:e[1]||(e[1]=a=>f(d.value-1)),disabled:d.value===1,class:"btn-page","aria-disabled":"currentPage === 1","aria-label":"P√°gina anterior"}," ‚¨ÖÔ∏è Anterior ",8,kl),(r(!0),s(_,null,j(g.value,a=>(r(),s("button",{key:a,onClick:i=>f(a),class:Y(["btn-page",{"btn-page-active":a===d.value}]),"aria-current":a===d.value?"page":!1},o(a),11,yl))),128)),l("button",{onClick:e[2]||(e[2]=a=>f(d.value+1)),disabled:d.value===g.value,class:"btn-page","aria-disabled":"currentPage === totalPages","aria-label":"P√°gina siguiente"}," Siguiente ‚û°Ô∏è ",8,Tl)])]),C(Z,{name:"fade"},{default:P(()=>[m.value?(r(),s("div",hl,[l("div",wl,[e[21]||(e[21]=l("h2",{id:"modal-title",class:"modal-title"},"üëÅÔ∏è Detalles del Trabajador",-1)),n.value?(r(),s("div",xl,[l("div",Pl,[n.value.avatar?(r(),s("img",{key:0,src:`/storage/${n.value.avatar}`,alt:`Avatar de ${n.value.nombre}`,class:"modal-avatar",loading:"lazy"},null,8,jl)):c("",!0)]),l("dl",Ll,[l("div",null,[e[6]||(e[6]=l("dt",null,"Nombre:",-1)),l("dd",null,o(n.value.nombre)+" "+o(n.value.apellido),1)]),l("div",null,[e[7]||(e[7]=l("dt",null,"RUT:",-1)),l("dd",null,o(n.value.rut),1)]),l("div",null,[e[8]||(e[8]=l("dt",null,"Fecha de Nacimiento:",-1)),l("dd",null,o(F(n.value.fecha_nacimiento)),1)]),l("div",null,[e[9]||(e[9]=l("dt",null,"Estado Civil:",-1)),l("dd",null,o(n.value.estado_civil),1)]),l("div",null,[e[10]||(e[10]=l("dt",null,"Nacionalidad:",-1)),l("dd",null,o(n.value.nacionalidad),1)]),l("div",null,[e[11]||(e[11]=l("dt",null,"Direcci√≥n:",-1)),l("dd",null,o(n.value.direccion),1)]),l("div",null,[e[12]||(e[12]=l("dt",null,"Comuna:",-1)),l("dd",null,o(n.value.comuna),1)]),l("div",null,[e[13]||(e[13]=l("dt",null,"Email:",-1)),l("dd",null,o(n.value.email),1)]),l("div",null,[e[14]||(e[14]=l("dt",null,"Tel√©fono:",-1)),l("dd",null,o(n.value.telefono),1)]),l("div",null,[e[15]||(e[15]=l("dt",null,"AFP:",-1)),l("dd",null,o(n.value.afp),1)]),l("div",null,[e[16]||(e[16]=l("dt",null,"Cargo:",-1)),l("dd",null,o(n.value.cargo),1)]),l("div",null,[e[17]||(e[17]=l("dt",null,"Tama√±o de Ropa:",-1)),l("dd",null,o(n.value.tama√±o_ropa),1)]),l("div",null,[e[18]||(e[18]=l("dt",null,"Tipo de Contrato:",-1)),l("dd",null,o(n.value.tipo_contrato),1)]),l("div",null,[e[19]||(e[19]=l("dt",null,"Sueldo Real:",-1)),l("dd",null,o(w(n.value.sueldo_real)),1)]),l("div",null,[e[20]||(e[20]=l("dt",null,"Sueldo Liquidaci√≥n:",-1)),l("dd",null,o(w(n.value.sueldo_liquidacion)),1)])])])):c("",!0),l("button",{onClick:D,class:"btn-close-modal","aria-label":"Cerrar detalles trabajador"},"Cerrar")])])):c("",!0)]),_:1})]),_:1})],64))}},Rl=el(Nl,[["__scopeId","data-v-ef149055"]]);export{Rl as default};
